import"./index.CLjUf3Ti.js";import{b as g}from"./entry.CDoBrHEd.js";import{p as I}from"./stores.SWHw9ayC.js";import{S as P}from"./index.DVx-03h4.js";import{r as A}from"./runtime.CSTc6qgx.js";function _(e,t){return e===""?"":e.startsWith("/")?e:new URL(e,t).pathname}const G="$paraglide-adapter-sveltekit:context",m="__data.json",L=".html__data.json",X="paraglide:lang";function h(e){return"/"+e.split("/").filter(Boolean).join("/")}const p=(...e)=>e.map(h).filter(t=>t!=="/").reduce((t,a)=>t+a,"")||"/";function j(e){try{return decodeURI(e)}catch{return e}}function x(e,t){e=j(e),e=h(e);const a=h(t.base),{availableLanguageTags:n,defaultLanguageTag:s}=t;let r=e.replace(a,"/");const u=r.endsWith(L)?L:r.endsWith(m)?m:void 0;u&&(r=r.replace(u,""));const[c,...i]=r.split("/").filter(Boolean);if(!c)return{base:a,lang:s,path:"/",dataSuffix:u};const l=n.includes(c)?c:s,f=n.includes(c)?h(i.join("/")):h(r);return{base:a,lang:l,path:f,dataSuffix:u}}function T(e){const t=[];return t.push(e.base),e.includeLanguage&&(!(e.lang===e.defaultLanguageTag)||e.prefixDefaultLanguage==="always")&&t.push(e.lang),t.push(e.path),e.dataSuffix&&t.push(m),p(...t)}const O=/\[(.*?)\]/g;function b(e){const t=e.match(O);if(!t)return[{type:"static",value:e}];const a=[];let n=0;for(const r of t){const u=e.indexOf(r,n),c=e.slice(n,u);c&&a.push({type:"static",value:c});const i=r.slice(1,-1);a.push({type:"param",name:i}),n=u+r.length}const s=e.slice(n);return s&&a.push({type:"static",value:s}),a}function v(e,t){let a;e:for(const n of t){const s=b(n),r={};let u=0;for(const f of s)if(f.type==="static"){if(f.value!==e.slice(u,u+f.value.length))continue e;u+=f.value.length}else if(f.type==="param"){let o=e.indexOf("/",u);o===-1&&(o=e.length),r[f.name]=e.slice(u,o),u=o}if(u!==e.length)continue;const c={id:n,params:r};if(!a){a=c;continue}const i=Object.keys(a.params).length,l=Object.keys(r).length;i<l||(i===l?a.id.length>n.length&&(a=c):a=c)}return a}function D(e,t){const a=b(e);let n="";for(const s of a)if(s.type==="static")n+=s.value;else{const r=t[s.name];if(!r)throw new Error(`Missing param ${s.name}`);n+=r}return n}function B(e,t,a){const n=v(e,Object.keys(a));if(!n)return e;const s=a[n.id];if(!s)return e;const r=s[t];return r?D(r,n.params):e}function y(e,t,a){for(const[n,s]of Object.entries(a)){if(!(t in s))continue;const r=s[t];if(!r)continue;const u=v(e,[r]);if(u)return D(n,u.params)}return e}const E=({defaultLanguageTag:e,runtime:t,translations:a})=>({url:n})=>{try{const{lang:s,path:r,dataSuffix:u}=x(n.pathname,{base:g,availableLanguageTags:t.availableLanguageTags,defaultLanguageTag:e}),c=y(r,s,a);return T({path:c,base:g,dataSuffix:u,includeLanguage:!1})}catch{return n.pathname}};function S(e){const t=[];for(const a of e)typeof a=="string"?t.push(n=>n===a):t.push(n=>a.test(n));return a=>(a=h(a),t.some(n=>n(a)))}function k(e){try{const t=new Intl.Locale(e);return"textInfo"in t?t.textInfo.direction==="rtl"?"rtl":"ltr":t.getTextInfo().direction==="rtl"?"rtl":"ltr"}catch{return"ltr"}}function w(e){const t=e.map(a=>[a,k(a)]);return Object.fromEntries(t)}function R(e,t){const a={};for(const n in e){const s=e[n];if(s){if(typeof s=="object"){a[n]=e[n];continue}a[n]=W(s,t)}}return a}function W(e,t){const a=t.map(n=>[n,e({},{languageTag:n})]);return Object.fromEntries(a)}function F(e,t){var u;const a=R((t==null?void 0:t.pathnames)??{},e.availableLanguageTags),n=(t==null?void 0:t.exclude)??[],s=(t==null?void 0:t.defaultLanguageTag)??e.sourceLanguageTag,r={runtime:e,translations:a,exclude:S(n),defaultLanguageTag:s,prefixDefaultLanguage:(t==null?void 0:t.prefixDefaultLanguage)??"never",textDirection:(t==null?void 0:t.textDirection)??w(e.availableLanguageTags),seo:{noAlternateLinks:((u=t==null?void 0:t.seo)==null?void 0:u.noAlternateLinks)??!1}};return Object.freeze(a),Object.freeze(r),{config:r,reroute:()=>E(r),handle:(c={})=>{throw new Error("")},getLanguageFromUrl(c){const l=c.pathname.slice(d(g).length).split("/").filter(Boolean).at(0);return e.isAvailableLanguageTag(l)?l:s},resolveRoute(c,i=void 0){if(r.exclude(c))return c;const l=d(g);if(i=i??e.languageTag(),!c.startsWith(l))return c;const f=c.slice(l.length),o=B(f,i,a);return T({path:o,lang:i,base:l,dataSuffix:void 0,includeLanguage:!0,defaultLanguageTag:s,prefixDefaultLanguage:r.prefixDefaultLanguage})},route(c){const{path:i,lang:l}=x(c,{base:d(g),availableLanguageTags:r.runtime.availableLanguageTags,defaultLanguageTag:r.defaultLanguageTag}),f=y(i,l,a);return p(d(g),f)}}}function d(e){return e===""?"":e.startsWith("/")?e:_(e,new URL(P(I).url))}const $=F(A);export{X as L,G as P,y as a,B as b,x as g,$ as i,_ as n,T as s};
